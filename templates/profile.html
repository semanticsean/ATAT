<!-- templates/profile.html -->
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agent Profile</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.0.4/dist/tailwind.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }

        #content {
            min-height: 100%;
            margin-bottom: -4rem;
        }

        #footer-push {
            height: 4rem;
        }

        footer {
            height: 4rem;
        }

        .agent-image {
            position: relative;
        }

    </style>
</head>
<body class="bg-blue-50">
    {% include 'header.html' %}
      <div class="container mx-auto px-4 py-8 md:mt-12 mt-6 ">
        {% if agent %}
          <div class="bg-white rounded-lg shadow-md">
            <div class="flex flex-col md:flex-row">
              <div class="md:w-1/2">
                <img src="{{ custom_image_filter(agent.photo_path, '64x64') }}" alt="Agent Profile" class="w-24 h-24 md:w-64 md:h-64 rounded-full border-4 border-white mb-4 md:mb-0 md:mr-12">
              </div>
              <div class="md:w-1/2 p-6">
                <div class="mb-2">
                  <div class="mb-2 container mx-auto px-4 py-2 mt-2 bg-white rounded-lg shadow-md mb-4 ">
                  <h1 class="text-3xl font-semibold">{{ agent.id }}</h1>
                  <h2 class="text-xl font-semibold text-gray-400">{{ agent.jobtitle }}</h2>
                  <p class="text-gray-700">{{ agent.summary }}</p>
                  </div>
                  <div class="mb-8 container mx-auto px-4 py-4 mt-4 bg-white rounded-lg shadow-md">
                    <h2 class="text-xl font-semibold mb-2">Keywords</h2>
                    <div class="flex flex-wrap gap-2">
                      {% for keyword in agent.keywords %}
                      <span class="bg-gray-400 text-white font-bold py-2 px-4 rounded">{{ keyword }}</span>
                      {% endfor %}
                    </div>
                  </div>
                </div>
                <div class="mb-8 container mx-auto px-4 py-4 mt-4 bg-white rounded-lg shadow-md mb-4 ">
                  <h2 class="text-xl font-semibold mb-2">Actions</h2>
                
                  <a href="mailto:{{ agent.email }}" class="inline-block bg-black text-white font-bold py-2 px-4 rounded hover:bg-gray-400">Email Synth</a>
                  <a href="{{ url_for('profile_blueprint.edit_agent', agent_id=agent.id) }}" class="inline-block bg-black text-white font-bold py-2 px-4 rounded hover:bg-gray-400">Edit Synth</a>
                </div>
                
              </div>
            </div>
          </div>
       
          <div class="container mx-auto px-4 py-8">
            <div class="mb-8 container mx-auto px-4 py-8 md:mt-12 mt-6 bg-white rounded-lg shadow-md">
              <h2 class="text-xl font-semibold mb-2">Persona</h2>
              {% set sentences = agent.persona.split('. ') %}
              {% for group in sentences | batch(6) %}
              <p class="text-gray-700 mb-4">{{ group | join('. ') }}.</p>
              {% endfor %}
            </div>
            <div class="mb-4 container mx-auto px-4 py-8 md:mt-12 mt-6 bg-white rounded-lg shadow-md">
              <h2 class="text-xl font-semibold mb-2">Image Prompt</h2>
              <p class="text-gray-700">{{ agent.image_prompt }}</p>
            </div>
            <div class="mb-2 container mx-auto px-4 py-8 md:mt-12 mt-6 bg-white rounded-lg shadow-md">
              <h2 class="text-xl font-semibold mb-2">Relationships</h2>
              {% for relationship in agent.relationships %}
              <div class="bg-gray-100 rounded-lg p-4 mb-4">
                <h3 class="text-lg font-semibold mb-2">{{ relationship.name }}</h3>
                <p class="text-gray-700 mb-2"><strong>Job:</strong> {{ relationship.job }}</p>
                <p class="text-gray-700 mb-2"><strong>Relationship Description:</strong> {{ relationship.relationship_description }}</p>
                <p class="text-gray-700"><strong>Summary:</strong> {{ relationship.summary }}</p>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
  <div class="container mx-auto px-4 py-4">
    <div class="mb-2 container mx-auto px-4 py-4 mt-2 bg-white rounded-lg shadow-md">
  <div class="flex space-x-2 mt-1">
    <a href="{{ url_for('profile_blueprint.profile', agent_id=prev_agent_id) }}" class="flex-1 bg-gray-300 text-white font-bold py-1 px-2 rounded hover:bg-gray-400 text-center {% if not prev_agent_id %}opacity-50 cursor-not-allowed{% endif %}" {% if not prev_agent_id %}disabled{% endif %}>Previous</a>
    <a href="{{ url_for('profile_blueprint.profile', agent_id=next_agent_id) }}" class="flex-1 bg-gray-300 text-white font-bold py-1 px-2 rounded hover:bg-gray-400 text-center {% if not next_agent_id %}opacity-50 cursor-not-allowed{% endif %}" {% if not next_agent_id %}disabled{% endif %}>Next</a>
  </div>
    </div>
  </div>
        {% else %}
        <p>Agent not found.</p>
        {% endif %}
      </div>
  
    </div>
    <div id="footer-push"></div>
    {% include 'footer.html' %}
</body>
</html>